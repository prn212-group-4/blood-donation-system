<Window x:Class="BloodDonationSystem.UI.StaffBloodStorage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Blood Storage"
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">

    <ScrollViewer>
        <StackPanel Margin="30">

            <!-- Tiêu đề chính -->
            <TextBlock Text="🧪 Blood Storage Overview"
                       FontSize="26" FontWeight="SemiBold"
                       Foreground="#C62828"
                       Margin="0 0 0 20"/>

            <!-- Danh sách các túi máu -->
            <ItemsControl x:Name="BloodBagList">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="#ccc" CornerRadius="10" Padding="20" Margin="0 0 0 15" Background="White">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                    <TextBlock FontSize="16" FontWeight="Bold" Text="{Binding Id}" />
                                    <TextBlock FontSize="14" Foreground="Gray" Text="{Binding Donation.Id, StringFormat=Donation: {0}}" />
                                    <TextBlock FontSize="14" Text="{Binding Component.Name, StringFormat=Component: {0}}" />
                                    <TextBlock FontSize="14" Text="{Binding Amount, StringFormat=Amount: {0} ml}" />
                                    <TextBlock FontSize="14" Text="{Binding ExpiredTime, StringFormat=Expires: {0:dd/MM/yyyy HH:mm}}" />
                                </StackPanel>

                                <!-- Nút đánh dấu đã sử dụng -->
                                <StackPanel Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <Button Width="100" Height="30" Tag="{Binding}" Click="MarkAsUsed_Click">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Content" Value="Mark as Used"/>
                                                <Setter Property="Background" Value="DodgerBlue"/>
                                                <Setter Property="Foreground" Value="White"/>
                                                <Setter Property="FontWeight" Value="Bold"/>
                                                <Setter Property="IsEnabled" Value="True"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsUsed}" Value="True">
                                                        <Setter Property="Content" Value="Used"/>
                                                        <Setter Property="Background" Value="Gray"/>
                                                        <Setter Property="IsEnabled" Value="False"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>
</Window>
